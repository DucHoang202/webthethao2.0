{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/webthethao2.0/app/reel/page.tsx"],"sourcesContent":["'use client';\r\nimport \"../../styles/main.scss\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nconst Reel = () => {\r\n\r\n    // ===============================\r\n    // DOM refs\r\n    // ===============================\r\n    const appRef = useRef<HTMLDivElement>(null);\r\n    const soundToggleRef = useRef<HTMLButtonElement>(null);\r\n    const soundIconRef = useRef<SVGSVGElement>(null);\r\n    const progressRef = useRef<HTMLInputElement>(null);\r\n    const overlayRef = useRef<HTMLDivElement>(null);\r\n\r\n    const overlayBackRef = useRef<HTMLButtonElement>(null);\r\n    const overlayPlayRef = useRef<HTMLButtonElement>(null);\r\n    const overlayNextRef = useRef<HTMLButtonElement>(null);\r\n\r\n    // ===============================\r\n    // Refs cho reels\r\n    // ===============================\r\n    const reelsRefs = useRef<HTMLDivElement[]>([]);\r\n\r\n    const registerReel = (el: HTMLDivElement | null, index: number) => {\r\n        if (el) reelsRefs.current[index] = el;\r\n    };\r\n\r\n    // ===============================\r\n    // Logic states\r\n    // ===============================\r\n    const activeIndexRef = useRef(0);\r\n    const isAnimatingRef = useRef(false);\r\n    const isMutedRef = useRef(true);\r\n\r\n    const currentVideoRef = useRef<HTMLVideoElement | null>(null);\r\n    const overlayTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const progressMax = 1000;\r\n\r\n    // ===============================\r\n    // Helpers\r\n    // ===============================\r\n    const layoutAround = (center: number) => {\r\n        const reels = reelsRefs.current;\r\n        const next = (center + 1) % reels.length;\r\n        const prev = (center - 1 + reels.length) % reels.length;\r\n\r\n        reels.forEach((reel, i) => {\r\n            reel.style.transition = \"none\";\r\n            if (i === center) reel.style.transform = \"translateY(0%)\";\r\n            else if (i === next) reel.style.transform = \"translateY(100%)\";\r\n            else if (i === prev) reel.style.transform = \"translateY(-100%)\";\r\n            else reel.style.transform = \"translateY(200%)\";\r\n        });\r\n    };\r\n\r\n    const updateProgressBar = (value: number) => {\r\n        const ratio = Math.min(1, Math.max(0, value / progressMax));\r\n        progressRef.current?.style.setProperty(\"--p\", `${ratio * 100}%`);\r\n    };\r\n\r\n    const syncProgress = (video: HTMLVideoElement | null) => {\r\n        if (!video || !video.duration) {\r\n            progressRef.current!.value = \"0\";\r\n            updateProgressBar(0);\r\n            return;\r\n        }\r\n\r\n        const val = (video.currentTime / video.duration) * progressMax;\r\n        progressRef.current!.value = val.toString();\r\n        updateProgressBar(val);\r\n    };\r\n\r\n    const bindVideoEvents = (video: HTMLVideoElement | null) => {\r\n        if (currentVideoRef.current) {\r\n            currentVideoRef.current.onloadedmetadata = null;\r\n            currentVideoRef.current.ontimeupdate = null;\r\n        }\r\n\r\n        currentVideoRef.current = video;\r\n\r\n        if (!video) return;\r\n\r\n        video.onloadedmetadata = () => syncProgress(video);\r\n        video.ontimeupdate = () => syncProgress(video);\r\n    };\r\n\r\n    const playActive = () => {\r\n        reelsRefs.current.forEach((reel, i) => {\r\n            const vid = reel.querySelector(\"video\")!;\r\n            vid.muted = isMutedRef.current;\r\n\r\n            if (i === activeIndexRef.current) {\r\n                bindVideoEvents(vid);\r\n                vid.play().catch(() => { });\r\n            } else {\r\n                vid.pause();\r\n            }\r\n        });\r\n    };\r\n\r\n    const animateTo = (direction: number) => {\r\n        if (isAnimatingRef.current) return;\r\n\r\n        const reels = reelsRefs.current;\r\n        const active = activeIndexRef.current;\r\n        const target = (active + direction + reels.length) % reels.length;\r\n\r\n        if (target === active) return;\r\n\r\n        isAnimatingRef.current = true;\r\n\r\n        layoutAround(active);\r\n\r\n        const currentEl = reels[active];\r\n        const targetEl = reels[target];\r\n\r\n        targetEl.style.transition = \"none\";\r\n        targetEl.style.transform = `translateY(${direction === 1 ? 100 : -100}%)`;\r\n\r\n        requestAnimationFrame(() => {\r\n            currentEl.style.transition = \"transform 280ms ease\";\r\n            targetEl.style.transition = \"transform 280ms ease\";\r\n\r\n            currentEl.style.transform = `translateY(${direction === 1 ? -100 : 100}%)`;\r\n            targetEl.style.transform = \"translateY(0%)\";\r\n        });\r\n\r\n        const done = () => {\r\n            currentEl.removeEventListener(\"transitionend\", done);\r\n            targetEl.removeEventListener(\"transitionend\", done);\r\n\r\n            activeIndexRef.current = target;\r\n            layoutAround(target);\r\n            playActive();\r\n\r\n            isAnimatingRef.current = false;\r\n            overlayRef.current?.classList.remove(\"visible\");\r\n        };\r\n\r\n        currentEl.addEventListener(\"transitionend\", done);\r\n        targetEl.addEventListener(\"transitionend\", done);\r\n    };\r\n\r\n    const showOverlay = () => {\r\n        const overlay = overlayRef.current!;\r\n        overlay.classList.add(\"visible\");\r\n\r\n        if (overlayTimerRef.current) clearTimeout(overlayTimerRef.current);\r\n\r\n        overlayTimerRef.current = setTimeout(() => {\r\n            overlay.classList.remove(\"visible\");\r\n        }, 2500);\r\n    };\r\n\r\n    // ===============================\r\n    // Effect init\r\n    // ===============================\r\n    useEffect(() => {\r\n        layoutAround(0);\r\n        playActive();\r\n        updateProgressBar(0);\r\n    }, []);\r\n\r\n    // ===============================\r\n    // Render\r\n    // ===============================\r\n    return (\r\n        <div className=\"reels-container\" ref={appRef}>\r\n            {/* TOPBAR */}\r\n            <div className=\"topbar\">\r\n                <div className=\"back\">←</div>\r\n                <h1>Videos</h1>\r\n\r\n                <button ref={soundToggleRef} className=\"sound-toggle\">\r\n                    <svg ref={soundIconRef} className=\"sound-icon\" width=\"20\" height=\"20\">\r\n                        <polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"></polygon>\r\n                        <line x1=\"23\" y1=\"9\" x2=\"17\" y2=\"15\"></line>\r\n                        <line x1=\"17\" y1=\"9\" x2=\"23\" y2=\"15\"></line>\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n\r\n            {/* REELS */}\r\n            <div className=\"reels\">\r\n                {[0, 1, 2].map((i) => (\r\n                    <div\r\n                        key={i}\r\n                        className=\"reel portrait\"\r\n                        ref={(el) => registerReel(el, i)}\r\n                    >\r\n                        <div className=\"media\">\r\n                            <video\r\n                                src=\"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4\"\r\n                                autoPlay\r\n                                muted\r\n                                loop\r\n                                playsInline\r\n                                onClick={showOverlay}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"gradient-top\"></div>\r\n                        <div className=\"gradient-bottom\"></div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* PROGRESS */}\r\n            <div className=\"progress-wrap\">\r\n                <input\r\n                    type=\"range\"\r\n                    ref={progressRef}\r\n                    min=\"0\"\r\n                    max={progressMax}\r\n                    defaultValue=\"0\"\r\n                    className=\"progress-bar\"\r\n                    onInput={(e) => {\r\n                        const video = currentVideoRef.current;\r\n                        if (!video || !video.duration) return;\r\n                        const val = Number((e.target as HTMLInputElement).value);\r\n                        video.currentTime = (val / progressMax) * video.duration;\r\n                        syncProgress(video);\r\n                    }}\r\n                />\r\n            </div>\r\n\r\n            {/* OVERLAY */}\r\n            <div className=\"overlay\" ref={overlayRef}>\r\n                <button ref={overlayBackRef}>⟲</button>\r\n                <button ref={overlayPlayRef}>▶</button>\r\n                <button ref={overlayNextRef}>⟳</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Reel;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/webthethao2.0/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/webthethao2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0IACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Windows/webthethao2.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0IACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}